@model ComponentButtonWithEntryReferenceEntry;

@{
	var sectionSlug = Context.GetRouteData().Values.First(value => value.Key == "sectionSlug" || value.Key == "route").Value
	as string;
	var categorySlug = Context.GetRouteData().Values.First(value => value.Key == "categorySlug" || value.Key == "route").Value
	as string;
}

@{

	switch (Model.LinkToEntry)
	{
		case PageEntry pageContent:
			{

				var buttonWithLink = new ComponentButtonWithLinkEntry
				{
					Button = Model.Button!,
					Href = pageContent.Slug
				};

				<partial name="components/ButtonWithLink" model=@buttonWithLink />
				break;
			}
		case QuestionnaireQuestionEntry _:
			{
				<govuk-button-link asp-controller="Questions" asp-action="GetNextUnansweredQuestion" asp-route-sectionSlug="@sectionSlug" asp-route-categorySlug="@categorySlug" class="govuk-link">
					@Model.Button!.Value
				</govuk-button-link>
				break;
			}
	}
}
