@using Dfe.PlanTech.Domain.Content.Models;
@using Dfe.PlanTech.Domain.Content.Models.Buttons;
@using Dfe.PlanTech.Domain.Questionnaire.Models;
@using Dfe.PlanTech.Web;

@model Dfe.PlanTech.Domain.Content.Models.Buttons.ButtonWithEntryReference;

@{
    if(Model.Link is null){
        return;
    }
    switch (Model.LinkType)
    {
        case LinkToEntryType.Page:
            {
                var buttonWithLink = new ButtonWithLink()
                        {
                            Button = Model.Button,
                            Href = Model.Link.Slug
                        };

                <partial name="components/ButtonWithLink" model=@buttonWithLink/>
                break;
            }

        case LinkToEntryType.Question:
            {
                var sectionSlug = Context.GetRouteData().Values.First(value => value.Key == "sectionSlug" || value.Key == "route").Value as string;

                <govuk-button-link asp-controller="Questions" asp-action="GetNextUnansweredQuestion" asp-route-sectionSlug=@sectionSlug
                    class="govuk-link">
                    @Model.Button.Value
                </govuk-button-link>
                break;
            }
    }
}
